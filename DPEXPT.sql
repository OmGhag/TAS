CREATE TABLE BOOK(ISBN_NO INT PRIMARY KEY,PUBLISHER VARCHAR(30), TITLE VARCHAR(20),EDITION INT, PRIZE INT);
SELECT * FROM BOOK;
CREATE TABLE AUTHOR(ISBN_NO INT ,FOREIGN KEY (ISBN_NO) REFERENCES BOOK, AUTHOR_NAME VARCHAR(50) PRIMARY KEY);
SELECT * FROM AUTHOR;
CREATE TABLE BOOK_COPY(SNO INT PRIMARY KEY, ISBN_NO INT ,FOREIGN KEY (ISBN_NO) REFERENCES BOOK, DOP DATE, COST INT);
SELECT * FROM BOOK_COPY;
CREATE TABLE MEMBER(M_ID INT PRIMARY KEY, MNAME VARCHAR(50),CONTACT_NO BIGINT, ADDRESS VARCHAR(100));
SELECT * FROM MEMBER;
CREATE TABLE BORROW(S_NO INT, FOREIGN KEY (S_NO) REFERENCES BOOK_COPY, ISSUE_NO INT PRIMARY KEY ,M_ID INT, FOREIGN KEY (M_ID) REFERENCES MEMBER,ISSUE_DATE DATE, RETURN_DATE DATE);
SELECT * FROM BORROW;
DROP TABLE BORROW;

INSERT INTO BOOK VALUES('5165','KORTH','DBMS','15','3000');
INSERT INTO BOOK VALUES('2186','KLUTZ','OS','13','2600');

INSERT INTO AUTHOR VALUES('2186','SCHULZ');
INSERT INTO AUTHOR VALUES('5165','KORTH');

INSERT INTO BOOK_COPY VALUES('1','5165','2002-11-04','300000');
INSERT INTO BOOK_COPY VALUES('2','2186','1999-01-24','260500');

INSERT INTO MEMBER VALUES('001','ABC','2689564945','DADAR');
INSERT INTO MEMBER VALUES('002','DEF','3226516162','VASHI');

INSERT INTO BORROW VALUES('1','151','001','2023-04-19','2023-05-20');
INSERT INTO BORROW VALUES('2','101','002','2023-03-15','2023-04-16');
INSERT INTO BORROW VALUES('1','132','001','2023-03-15'); 


SELECT M_ID FROM BORROW WHERE CURRENT_DATE<RETURN_DATE OR RETURN_DATE IS NULL;

INSERT INTO BOOK VALUES('2691','TMH','SPCC','13','260');
INSERT INTO BOOK VALUES('2022','TMH','DS','12','5000');

UPDATE BOOK SET PRIZE=260 WHERE ISBN_NO='2691';
UPDATE BOOK SET PRIZE=5000 WHERE ISBN_NO='2022';

UPDATE BOOK SET PRIZE=PRIZE+(0.1*PRIZE) WHERE PUBLISHER='TMH';

INSERT INTO BOOK VALUES('2110','HSD','MP','2','280');
INSERT INTO BOOK VALUES('2051','TMH','TCS','6','515');

INSERT INTO BOOK_COPY VALUES('3','2110','2001-01-24','26000');
INSERT INTO BOOK_COPY VALUES('4','2051','2003-10-02','26000');

INSERT INTO MEMBER VALUES('003','GHI','2685454570','THANE');
INSERT INTO MEMBER VALUES('004','JKL','3226111542','VASHI');

INSERT INTO BORROW VALUES('3','2110','003','2023-03-12'); 
INSERT INTO BORROW VALUES('4','2051','002','2023-03-19'); 
INSERT INTO BORROW VALUES ('4','2001','003','2023-03-12');


SELECT M_ID FROM MEMBER WHERE M_ID NOT IN(SELECT M_ID FROM BORROW);
